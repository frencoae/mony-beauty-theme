{% set currency_names = {
  'USD': 'Dollar',
  'SAR': 'Riyal', 
  'EUR': 'Euro',
  'GBP': 'Pound',
  'AED': 'Dirham'
} %}

{% set currency_symbols = {
  'USD': '$',
  'SAR': 'ر.س',
  'EUR': '€',
  'GBP': '£',
  'AED': 'د.إ'
} %}

{# | Variable | Type | Description |
|------------------|---------|---------------------------------| | cart | object
| | | cart.items_count | int | | | cart.total | string | Formatted total ex:
"١٠٠ ر.س" | #} {% set important_links = theme.settings.get('important_links') %}
<header class="store-header">
  {# Top Banner #}
  <section class="w-full bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white text-sm py-2 relative z-50">
    <div class="w-full text-center px-4">
      <p class="font-medium" id="custom-banner-text">Free Shipping on Order above 300 SAR</p>
    </div>
  </section>

  {# Main Header #}
  <div class="relative z-40 bg-white">
    <div class="w-full bg-white text-gray-800">
      <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
        {# Mobile Menu Button #}
        <button id="mobile-menu-button" class="lg:hidden p-2 rounded-md text-gray-700 hover:text-pink-500">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>

        {# Logo - Centered on mobile, left on desktop #}
        <div class="text-2xl font-light tracking-widest text-center lg:text-left flex-1 lg:flex-none">
          MONY BEAUTY
        </div>

        {# Desktop Navigation - Hidden on mobile #}
        <nav class="hidden lg:flex flex-1 justify-center">
          <ul class="flex items-center gap-8 text-sm font-medium">
            <li><a href="/" class="hover:text-pink-500 transition">Home</a></li>
            <li class="relative group">
              <a href="/shop" class="hover:text-pink-500 transition flex items-center">
                Shop
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </a>
              <ul class="absolute left-0 mt-2 hidden group-hover:block bg-white text-black rounded-md shadow-lg min-w-[180px] z-10">
                <li><a href="/shop/makeup" class="block px-4 py-2 hover:bg-pink-100">Makeup</a></li>
                <li><a href="/shop/skincare" class="block px-4 py-2 hover:bg-pink-100">Skincare</a></li>
                <li><a href="/shop/haircare" class="block px-4 py-2 hover:bg-pink-100">Haircare</a></li>
                <li><a href="/shop/fragrance" class="block px-4 py-2 hover:bg-pink-100">Fragrance</a></li>
              </ul>
            </li>
            <li><a href="/about" class="hover:text-pink-500 transition">About Us</a></li>
            <li><a href="/blog" class="hover:text-pink-500 transition">Blog</a></li>
            <li><a href="/contact" class="hover:text-pink-500 transition">Contact</a></li>
          </ul>
        </nav>

        {# Right Section: Icons and Currency #}
        <div class="flex items-center space-x-4">
          {# Currency & Language Selector - Hidden on mobile #}
          <div class="hidden lg:flex items-center space-x-6 mr-4">
            {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
            <button type="button" onclick="salla.event.dispatch('localization::open')" class="basis-0">
              <div class="flex items-center space-x-6">
                <!-- Language -->
                <div class="flex items-center space-x-1 cursor-pointer">
                  <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm" style="transform: scale(1.5); margin-right: 10px;"></span>
                  <span style="margin-right: 8px; font-size: 18px;">{{ language.name }}</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"/>
                  </svg>
                </div>

                <!-- Currency -->
                <div class="flex items-center space-x-1 cursor-pointer" id="currency-display">
                  <span id="currency-symbol" style="font-size: 20px;">{{ currency_symbols[currency.code] ?? currency.symbol }}</span>
                  <span style="font-size: 18px;" id="currency-name">{{ currency_names[currency.code] ?? currency.code }}</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"/>
                  </svg>
                </div>
              </div>
            </button>
            <salla-localization-modal></salla-localization-modal>
            {% endif %}
          </div>

          {# Icons #}
          <div class="flex items-center gap-4 text-xl">
            <div class="flex items-center justify-end header-custom-icons">
              {% if user.type=='user' %}
              <salla-user-menu avatar-only show-header></salla-user-menu>
              {% else %}
              <button
                class="header-btn text-gray-700"
                aria-label="user-icon"
                onclick="salla.event.dispatch('login::open')"
              >
                <img src="{{ asset('images/user-icon.svg') }}" alt="User" class="w-6 h-6">
              </button>
              {% endif %}
              <salla-cart-summary class="mx-2 custom-cart-icon">
                <img src="{{ asset('images/cart-icon.svg') }}" alt="Cart Icon" class="w-6 h-6">
              </salla-cart-summary>
              <button class="text-gray-700">
                <img src="{{ asset('images/search-icon.svg') }}" alt="Search Icon" class="w-6 h-6">
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  {# Mobile Side Navigation #}
  <div id="mobile-side-nav" class="fixed inset-0 z-50 flex transform transition-transform duration-300 ease-in-out -translate-x-full lg:hidden">
    {# Overlay #}
    <div class="fixed inset-0 bg-black bg-opacity-50" id="mobile-nav-overlay"></div>
    
    {# Side Panel #}
    <div class="relative w-80 max-w-full bg-white h-full overflow-y-auto shadow-xl">
      {# Close Button #}
      <div class="flex justify-end p-4">
        <button id="close-mobile-nav" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      {# Mobile Navigation Links #}
      <nav class="p-4">
        <ul class="space-y-4">
          <li><a href="/" class="block py-2 px-4 text-lg font-medium hover:bg-pink-50 hover:text-pink-500 rounded">Home</a></li>
          
          {# Shop with Expandable Submenu #}
          <li>
            <button id="mobile-shop-toggle" class="flex justify-between items-center w-full py-2 px-4 text-lg font-medium hover:bg-pink-50 hover:text-pink-500 rounded">
              <span>Shop</span>
              <svg id="mobile-shop-arrow" class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <ul id="mobile-shop-menu" class="mt-2 ml-4 space-y-2 hidden">
              <li><a href="/shop/makeup" class="block py-2 px-4 hover:bg-pink-50 hover:text-pink-500 rounded">Makeup</a></li>
              <li><a href="/shop/skincare" class="block py-2 px-4 hover:bg-pink-50 hover:text-pink-500 rounded">Skincare</a></li>
              <li><a href="/shop/haircare" class="block py-2 px-4 hover:bg-pink-50 hover:text-pink-500 rounded">Haircare</a></li>
              <li><a href="/shop/fragrance" class="block py-2 px-4 hover:bg-pink-50 hover:text-pink-500 rounded">Fragrance</a></li>
            </ul>
          </li>
          
          <li><a href="/about" class="block py-2 px-4 text-lg font-medium hover:bg-pink-50 hover:text-pink-500 rounded">About Us</a></li>
          <li><a href="/blog" class="block py-2 px-4 text-lg font-medium hover:bg-pink-50 hover:text-pink-500 rounded">Blog</a></li>
          <li><a href="/contact" class="block py-2 px-4 text-lg font-medium hover:bg-pink-50 hover:text-pink-500 rounded">Contact</a></li>
        </ul>
      </nav>
      
      {# Mobile Currency & Language Selector #}
      <div class="p-4 border-t border-gray-200">
        <div class="space-y-4">
          {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
          <button type="button" onclick="salla.event.dispatch('localization::open')" class="w-full text-left">
            <div class="flex flex-col space-y-4">
              <!-- Language -->
              <div class="flex items-center space-x-3">
                <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm" style="transform: scale(1.3);"></span>
                <span class="text-lg">{{ language.name }}</span>
              </div>

              <!-- Currency -->
              <div class="flex items-center space-x-3" id="mobile-currency-display">
                <span id="mobile-currency-symbol" class="text-xl">{{ currency_symbols[currency.code] ?? currency.symbol }}</span>
                <span class="text-lg" id="mobile-currency-name">{{ currency_names[currency.code] ?? currency.code }}</span>
              </div>
            </div>
          </button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</header>

<script>
document.addEventListener("DOMContentLoaded", function() {
  // Update banner text
  const bannerText = document.getElementById("custom-banner-text");
  if (bannerText) {
    bannerText.innerText = "Free Shipping on Order above 300 SAR";
  }

  // Mobile navigation functionality
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const closeMobileNav = document.getElementById("close-mobile-nav");
  const mobileNavOverlay = document.getElementById("mobile-nav-overlay");
  const mobileSideNav = document.getElementById("mobile-side-nav");
  const mobileShopToggle = document.getElementById("mobile-shop-toggle");
  const mobileShopMenu = document.getElementById("mobile-shop-menu");
  const mobileShopArrow = document.getElementById("mobile-shop-arrow");

  // Open mobile menu
  if (mobileMenuButton) {
    mobileMenuButton.addEventListener("click", function() {
      mobileSideNav.classList.remove("-translate-x-full");
      document.body.style.overflow = "hidden";
    });
  }

  // Close mobile menu
  function closeMobileMenu() {
    mobileSideNav.classList.add("-translate-x-full");
    document.body.style.overflow = "";
    // Also close the shop submenu when closing the main menu
    mobileShopMenu.classList.add("hidden");
    mobileShopArrow.classList.remove("rotate-180");
  }

  if (closeMobileNav) {
    closeMobileNav.addEventListener("click", closeMobileMenu);
  }

  if (mobileNavOverlay) {
    mobileNavOverlay.addEventListener("click", closeMobileMenu);
  }

  // Toggle shop submenu on mobile
  if (mobileShopToggle && mobileShopMenu && mobileShopArrow) {
    mobileShopToggle.addEventListener("click", function() {
      mobileShopMenu.classList.toggle("hidden");
      mobileShopArrow.classList.toggle("rotate-180");
    });
  }

  // Update currency display when currency changes
  if (typeof salla !== 'undefined') {
    salla.event.on('currency::changed', function(currency) {
      const symbolElement = document.getElementById('currency-symbol');
      const nameElement = document.getElementById('currency-name');
      const mobileSymbolElement = document.getElementById('mobile-currency-symbol');
      const mobileNameElement = document.getElementById('mobile-currency-name');
      
      // Define symbols for each currency
      const symbols = {
        'USD': '$',
        'SAR': 'ر.س', 
        'EUR': '€',
        'GBP': '£',
        'AED': 'د.إ'
      };
      
      const names = {
        'USD': 'Dollar',
        'SAR': 'Riyal',
        'EUR': 'Euro', 
        'GBP': 'Pound',
        'AED': 'Dirham'
      };
      
      // Update desktop display
      if (symbolElement && nameElement) {
        symbolElement.textContent = symbols[currency.code] || currency.symbol;
        nameElement.textContent = names[currency.code] || currency.code;
      }
      
      // Update mobile display
      if (mobileSymbolElement && mobileNameElement) {
        mobileSymbolElement.textContent = symbols[currency.code] || currency.symbol;
        mobileNameElement.textContent = names[currency.code] || currency.code;
      }
    });
  }
});
</script>