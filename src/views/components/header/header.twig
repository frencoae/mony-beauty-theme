<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mony Beauty</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles for sidenav and responsive behavior */
        .sidenav {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            background-color: white;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidenav a {
            padding: 12px 20px;
            text-decoration: none;
            font-size: 16px;
            color: #333;
            display: block;
            transition: 0.3s;
            border-bottom: 1px solid #f1f1f1;
        }

        .sidenav a:hover {
            background-color: #f8f8f8;
            color: #ec4899;
        }

        .sidenav .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
            color: #333;
        }

        .sidenav-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 180px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
            z-index: 1;
            border-radius: 4px;
        }

        .dropdown-content a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            border-bottom: 1px solid #f1f1f1;
        }

        .dropdown-content a:hover {
            background-color: #f8f8f8;
            color: #ec4899;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        @media (max-width: 768px) {
            .desktop-only {
                display: none;
            }
            .mobile-only {
                display: block;
            }
        }

        @media (min-width: 769px) {
            .mobile-only {
                display: none;
            }
            .desktop-only {
                display: block;
            }
        }
    </style>
</head>
<body class="font-sans">
    <header class="store-header">
        <!-- Top Banner -->
        <section class="w-full bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white text-sm py-2">
            <div class="w-full text-center px-4">
                <p class="font-medium" id="custom-banner-text">Free Shipping on Order above 300 SAR</p>
            </div>
        </section>

        <!-- Main Header -->
        <div class="relative z-10 bg-white text-gray-800 shadow-sm">
            <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
                <!-- Left: Mobile Menu Button -->
                <div class="mobile-only">
                    <button id="openSidenav" class="text-gray-800 text-xl">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>

                <!-- Left: Currency & Language Selector (Desktop) -->
                <div class="desktop-only">
                    <div class="header-buttons">
                        {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
                        <button type="button" onclick="salla.event.dispatch('localization::open')" class="basis-0">
                            <div class="flex items-center space-x-6">
                                <!-- Language -->
                                <div class="flex items-center space-x-1 cursor-pointer">
                                    <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm" style="transform: scale(1.5); margin-right: 10px;"></span>
                                    <span style="margin-right: 8px; font-size: 18px;">{{ language.name }}</span>
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                        <path d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </div>

                                <!-- Currency -->
                                <div class="flex items-center space-x-1 cursor-pointer" id="currency-display">
                                    <span id="currency-symbol" style="font-size: 20px;">{{ currency_symbols[currency.code] ?? currency.symbol }}</span>
                                    <span style="font-size: 18px;" id="currency-name">{{ currency_names[currency.code] ?? currency.code }}</span>
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                        <path d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </div>
                            </div>
                        </button>
                        <salla-localization-modal></salla-localization-modal>
                        {% endif %}
                    </div>
                </div>

                <!-- Center: Logo -->
                <div class="text-2xl font-light tracking-widest text-center">MONY BEAUTY</div>

                <!-- Right Section: Icons -->
                <div class="flex items-center space-x-5">
                    <div class="flex items-center gap-5 text-xl">
                        <div class="flex items-center justify-end header-custom-icons">
                            {% if user.type=='user' %}
                            <salla-user-menu avatar-only show-header></salla-user-menu>
                            {% else %}
                            <button
                                class="header-btn text-gray-800"
                                aria-label="user-icon"
                                onclick="salla.event.dispatch('login::open')"
                            >
                                <i class="fas fa-user-circle text-xl"></i>
                            </button>
                            {% endif %}
                            <salla-cart-summary class="mx-4 custom-cart-icon">
                                <i slot="icon" class="fas fa-shopping-bag text-xl"></i>
                            </salla-cart-summary>
                            <button class="text-gray-800">
                                <i class="fas fa-search text-xl"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nav Menu (Desktop) -->
            <nav class="w-full bg-white desktop-only">
                <ul class="flex items-center justify-center gap-8 text-sm font-medium text-gray-800 relative py-3">
                    <li><a href="/" class="hover:text-pink-500 transition">Home</a></li>

                    <!-- Shop with Dropdown -->
                    <li class="relative group dropdown">
                        <a href="/shop" class="hover:text-pink-500 transition flex items-center">
                            Shop <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </a>
                        <!-- Dropdown -->
                        <div class="dropdown-content">
                            <a href="/shop/makeup" class="block px-4 py-2 hover:bg-pink-100">Makeup</a>
                            <a href="/shop/skincare" class="block px-4 py-2 hover:bg-pink-100">Skincare</a>
                            <a href="/shop/haircare" class="block px-4 py-2 hover:bg-pink-100">Haircare</a>
                            <a href="/shop/fragrance" class="block px-4 py-2 hover:bg-pink-100">Fragrance</a>
                        </div>
                    </li>

                    <li><a href="/about" class="hover:text-pink-500 transition">About Us</a></li>
                    <li><a href="/blog" class="hover:text-pink-500 transition">Blog</a></li>
                    <li><a href="/contact" class="hover:text-pink-500 transition">Contact</a></li>
                </ul>
            </nav>
        </div>

        <!-- Sidenav for Mobile -->
        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" id="closeSidenav">&times;</a>
            <a href="/">Home</a>
            
            <!-- Shop with Submenu -->
            <div class="relative">
                <a href="/shop" class="flex justify-between items-center">
                    Shop <i class="fas fa-chevron-down"></i>
                </a>
                <div class="submenu pl-4 hidden">
                    <a href="/shop/makeup">Makeup</a>
                    <a href="/shop/skincare">Skincare</a>
                    <a href="/shop/haircare">Haircare</a>
                    <a href="/shop/fragrance">Fragrance</a>
                </div>
            </div>
            
            <a href="/about">About Us</a>
            <a href="/blog">Blog</a>
            <a href="/contact">Contact</a>
            
            <!-- Currency & Language Selector (Mobile) -->
            <div class="px-4 py-3 border-t border-gray-200 mt-4">
                <div class="header-buttons">
                    {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
                    <button type="button" onclick="salla.event.dispatch('localization::open')" class="w-full text-left">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm mr-2"></span>
                                <span>{{ language.name }}</span>
                            </div>
                            <div class="flex items-center">
                                <span id="mobile-currency-symbol">{{ currency_symbols[currency.code] ?? currency.symbol }}</span>
                                <span id="mobile-currency-name" class="ml-1">{{ currency_names[currency.code] ?? currency.code }}</span>
                            </div>
                        </div>
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Sidenav Overlay -->
        <div id="sidenavOverlay" class="sidenav-overlay"></div>
    </header>

    <script>
        // Sidenav functionality
        document.addEventListener('DOMContentLoaded', function() {
            const openSidenav = document.getElementById('openSidenav');
            const closeSidenav = document.getElementById('closeSidenav');
            const sidenav = document.getElementById('mySidenav');
            const sidenavOverlay = document.getElementById('sidenavOverlay');
            
            // Open sidenav
            openSidenav.addEventListener('click', function() {
                sidenav.style.width = '280px';
                sidenavOverlay.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
            
            // Close sidenav
            function closeNav() {
                sidenav.style.width = '0';
                sidenavOverlay.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
            
            closeSidenav.addEventListener('click', closeNav);
            sidenavOverlay.addEventListener('click', closeNav);
            
            // Toggle submenus in mobile sidenav
            const shopLinks = document.querySelectorAll('.sidenav .relative > a');
            shopLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (this.nextElementSibling && this.nextElementSibling.classList.contains('submenu')) {
                        e.preventDefault();
                        this.nextElementSibling.classList.toggle('hidden');
                        const icon = this.querySelector('i');
                        if (icon) {
                            icon.classList.toggle('fa-chevron-down');
                            icon.classList.toggle('fa-chevron-up');
                        }
                    }
                });
            });
            
            // Update banner text
            const bannerText = document.getElementById("custom-banner-text");
            if (bannerText) {
                bannerText.innerText = "Free Shipping on Order above 300 SAR";
            }
            
            // Currency change handler
            if (typeof salla !== 'undefined') {
                salla.event.on('currency::changed', function(currency) {
                    const symbolElement = document.getElementById('currency-symbol');
                    const nameElement = document.getElementById('currency-name');
                    const mobileSymbolElement = document.getElementById('mobile-currency-symbol');
                    const mobileNameElement = document.getElementById('mobile-currency-name');
                    
                    const symbols = {
                        'USD': '$',
                        'SAR': 'ر.س', 
                        'EUR': '€',
                        'GBP': '£',
                        'AED': 'د.إ'
                    };
                    
                    const names = {
                        'USD': 'Dollar',
                        'SAR': 'Riyal',
                        'EUR': 'Euro', 
                        'GBP': 'Pound',
                        'AED': 'Dirham'
                    };
                    
                    if (symbolElement && nameElement) {
                        symbolElement.textContent = symbols[currency.code] || currency.symbol;
                        nameElement.textContent = names[currency.code] || currency.code;
                    }
                    
                    if (mobileSymbolElement && mobileNameElement) {
                        mobileSymbolElement.textContent = symbols[currency.code] || currency.symbol;
                        mobileNameElement.textContent = names[currency.code] || currency.code;
                    }
                });
            }
        });
    </script>
</body>
</html>