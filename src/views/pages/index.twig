{# | Variable | Type | Description |
|------------------|------------|---------------------------------------------------------------------|
| page | object | | | page.title | string | *could be html | | page.slug |
string | ex: "cat.show" | #} {% extends "layouts.master" %} {% block content %}
<!-- Hero Content -->

<style>
/* Marquee Container */
.marquee-section {
  background-color: #f9fafb;
  padding: 2rem 0;
  overflow: hidden;
}

/* Marquee Row Base Styles */
.marquee-row {
  display: flex;
  width: 100%;
  overflow: hidden;
  position: relative;
}

/* Marquee Content */
.marquee-content {
  display: flex;
  align-items: center;
  flex-shrink: 0;
  gap: 4rem;
  padding: 0.75rem 0;
}

/* First Row Animation (Left to Right in LTR) */
.marquee-row-1 .marquee-content {
  animation: marquee-scroll-left 30s linear infinite;
}

/* Second Row Animation (Right to Left in LTR) */
.marquee-row-2 .marquee-content {
  animation: marquee-scroll-right 34s linear infinite;
}

/* Marquee Item */
.marquee-item {
  display: flex;
  align-items: center;
  white-space: nowrap;
  font-weight: 800;
  font-size: clamp(1.25rem, 3vw, 2.25rem);
  flex-shrink: 0;
}

/* Marquee Item Image */
.marquee-item img {
  width: 2rem;
  height: 2rem;
  object-fit: cover;
  margin-right: 0.75rem;
}

/* First Row Color */
.marquee-row-1 .marquee-item {
  color: #4CC7A5;
}

/* Second Row Color */
.marquee-row-2 .marquee-item {
  color: #2746AA;
}

/* Hover to Pause */
.marquee-row:hover .marquee-content {
  animation-play-state: paused;
}

/* Keyframes for LTR Direction */
@keyframes marquee-scroll-left {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}

@keyframes marquee-scroll-right {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(0); }
}

/* RTL Direction Adjustments */
html[dir="rtl"] .marquee-row-1 .marquee-content {
  animation: marquee-scroll-right 30s linear infinite;
}

html[dir="rtl"] .marquee-row-2 .marquee-content {
  animation: marquee-scroll-left 34s linear infinite;
}

/* Accessibility: Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .marquee-content {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transform: translateX(0) !important;
  }
}

/* Row Spacing */
.marquee-row + .marquee-row {
  margin-top: 1.5rem;
}

/* Infinite Marquee Utilities (old styles - keeping for reference but not using) */
.marquee {
  --gap: 2rem;            /* item spacing */
  --duration: 30s;        /* loop speed (bari value = slow) */
  display: flex;
  overflow: hidden;
  user-select: none;
  gap: 0;
}

.marquee__track {
  display: flex;
  align-items: center;
  gap: var(--gap);
  min-width: 100%;
  flex-shrink: 0;
  animation: marquee-scroll var(--duration) linear infinite;
}

.marquee--reverse .marquee__track {
  animation-direction: reverse;
}

.marquee__item {
  display: inline-flex;
  align-items: center;
  font-weight: 800;
  white-space: nowrap;
  font-size: clamp(1.25rem, 3vw, 2.25rem); /* sm → lg responsive */
}

/* Hover to pause (optional) */
.marquee:hover .marquee__track {
  animation-play-state: paused;
}

/* Keyframes */
@keyframes marquee-scroll {
  from { transform: translateX(0); }
  to   { transform: translateX(-100%); }
}

/* Accessibility: Respect Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .marquee__track {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transform: translateX(0) !important;
  }
}

/* RTL adjustments for marquee */
html[dir="rtl"] .marquee:not(.marquee--reverse) .marquee__track {
  animation-direction: reverse;
}
html[dir="rtl"] .marquee.marquee--reverse .marquee__track {
  animation-direction: normal;
}
</style>

 {# <section
    class="relative w-full text-white home-banner"
    style="
      background-image: url('{{ asset("images/Banner.jpg") }}');
      background-size: cover;
      background-position: center;
    ">    min-height: 100%;

<div class="px-4 sm:px-8">
  <div class="min-h-[72vh] md:min-h-[80vh] flex items-center">
    <div class="max-w-xl">
      <p class="uppercase tracking-widest text-xs sm:text-sm text-white/80">
        ALL YOU NEED IS LESS.
      </p>

      <h1
        class="mt-4 font-serif font-semibold leading-[1.1] text-4xl sm:text-5xl md:text-6xl"
      >
        Where
        <span
          class="bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 bg-clip-text text-transparent"
        >
          Confidence </span
        ><br class="hidden sm:block" />
        Meets <span class="text-white">Color</span>
      </h1>

      <button
        class="mt-8 inline-flex items-center justify-center px-6 py-3 rounded-full bg-pink-500 hover:bg-pink-600 text-white font-semibold shadow-lg shadow-pink-500/30"
      >
        Shop Now
      </button>
    </div>
  </div>
</div>
</section> #}
{% component home %} 

<!-- Moving Text Section (Improved Infinite Marquee) -->
<section class="marquee-section">
  <!-- Row 1 - Slides from left to right (LTR) -->
  <div class="marquee-row marquee-row-1">
    <div class="marquee-content">
      <!-- Original items -->
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <!-- Duplicate items for seamless loop -->
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/cream-icon.jpg') }}" alt="Cream Icon">
        <span class="marquee-text cream-text">Magic Water Cream</span>
      </span>
    </div>
  </div>

  <!-- Row 2 - Slides from right to left (LTR) -->
  <div class="marquee-row marquee-row-2">
    <div class="marquee-content">
      <!-- Original items -->
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <!-- Duplicate items for seamless loop -->
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
      <span class="marquee-item">
        <img src="{{ asset('images/lip-gloss.png') }}" alt="Lip Gloss">
        <span class="marquee-text lip-text">Shop Our Best Lip Gloss</span>
      </span>
    </div>
  </div>
</section>

<!-- Exclusive Offer Section -->
<section class="w-full bg-teal-500 py-16">
  <div class="container grid grid-cols-1 md:grid-cols-2 gap-10 items-center px-6 text-white">
    
    <!-- Left Side: Image -->
    <div class="flex justify-center">
      <img src="{{asset('images/offer.jpg')}}" alt="Exclusive Offer" class="rounded-2xl shadow-lg object-cover">
    </div>

    <!-- Right Side: Content -->
    <div>
      <h2 class="text-4xl font-extrabold mb-4" id="exclusive-title">Exclusive offer</h2>
      <p class="mb-6 text-lg leading-relaxed" id="exclusive-desc">
        Unlock the ultimate style upgrade with our exclusive offer. Enjoy savings of up to 
        40% off on our latest New Products.
      </p>

      <!-- Countdown Timer -->
      <div id="countdown" class="flex gap-4 mb-6">
        <div class="bg-white text-blue-900 font-bold text-center px-6 py-4 rounded w-24">
          <span id="days" class="text-2xl block">00</span>
          <span id="days-label" class="text-sm uppercase">Days</span>
        </div>
        <div class="bg-white text-blue-900 font-bold text-center px-6 py-4 rounded w-24">
          <span id="hours" class="text-2xl block">00</span>
          <span id="hours-label" class="text-sm uppercase">Hours</span>
        </div>
        <div class="bg-white text-blue-900 font-bold text-center px-6 py-4 rounded w-24">
          <span id="minutes" class="text-2xl block">00</span>
          <span id="minutes-label" class="text-sm uppercase">Min</span>
        </div>
        
      </div>

      <!-- Buy Now Button -->
      <button id="buy-now-offer" class="bg-blue-900 text-white px-10 py-3 rounded-full font-semibold hover:bg-blue-800 transition">
        BUY NOW
      </button>
    </div>
  </div>
</section>

<section class="py-16">
  <div class="container">
    <h2 class="text-left text-3xl md:text-4xl font-serif font-bold mb-8">
      Customer Reviews
    </h2>
  </div>

  <!-- Top Section: Camera + Thumbnails -->
  <div class="flex flex-col lg:flex-row items-center justify-between ">

    <!-- Thumbnails Section -->
    <div class="relative w-full overflow-hidden">
      <div class="flex animate-infinite-scroll">
        <!-- Original Images -->
        <div class="flex">
          <div class="min-w-[50px] rounded-md overflow-hidden">
            <img src="{{asset('images/review-3.jpg')}}" alt="Thumbnail 1" class="w-full h-full object-cover"/>
          </div>
          <div class="min-w-[50px] rounded-md overflow-hidden">
            <img src="{{asset('images/review-2.jpg')}}" alt="Thumbnail 2" class="w-full h-full object-cover"/>
          </div>
          <div class="min-w-[50px] rounded-md overflow-hidden">
            <img src="{{asset('images/review-3.jpg')}}" alt="Thumbnail 3" class="w-full h-full object-cover"/>
          </div>
        </div>

        <!-- Duplicate Images for Seamless Loop -->
        <div class="flex gap-">
          <div class="min-w-[50px] rounded-md overflow-hidden">
            <img src="{{asset('images/review-3.jpg')}}" alt="Thumbnail 1 duplicate" class="w-full h-full object-cover"/>
          </div>
          <div class="min-w-[50px] rounded-md overflow-hidden">
            <img src="{{asset('images/review-2.jpg')}}" alt="Thumbnail 2 duplicate" class="w-full h-full object-cover"/>
          </div>
          <div class="min-w-[50px] rounded-md overflow-hidden">
            <img src="{{asset('images/review-3.jpg')}}" alt="Thumbnail 3 duplicate" class="w-full h-full object-cover"/>
          </div>
        </div>
      </div>
    </div>

    <!-- Camera Mockup -->
    <div class=" min-w-[300px] flex-shrink-0">
      <img src="{{asset('images/review-4.png')}}" alt="Camera mockup" class="w-full h-full" />
    </div>
  </div>
</section>

<style>
@keyframes infinite-scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.animate-infinite-scroll {
  width: max-content;
  display: flex;
  animation: infinite-scroll 25s linear infinite;
}

/* Smooth performance improvement */
.animate-infinite-scroll img {
  will-change: transform;
  backface-visibility: hidden;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .animate-infinite-scroll {
    animation-duration: 35s;
  }
}
</style>

<section class="py-16">
  <div class="container mx-auto px-4">
    
    <!-- Centered Title -->
   <h2 class="relative text-center text-3xl md:text-4xl font-serif font-bold mb-12 leading-tight text-black">
                The
                <span class="relative inline-block bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent">
                    Star
                    <!-- Decorative Vector Underline -->
                    <img src="{{asset('images/hovervector.svg')}}" alt="Decorative underline" class="absolute left-1/2 -translate-x-1/2 bottom-[-6px] w-24 md:w-32" style="stroke: #2746AA; stroke-width: 2px; filter: brightness(0) saturate(100%) invert(12%) sepia(79%) saturate(1093%) hue-rotate(203deg) brightness(95%) contrast(91%);" />
                </span>
                of Your Routine
            </h2>

    <!-- Responsive Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">

      <!-- Right Image (on mobile this comes first) -->
      <div class="order-1 lg:order-2 flex justify-center">
        <div class="rounded-lg overflow-hidden shadow-lg max-w-xs md:max-w-sm lg:max-w-md">
          <img 
            src="{{asset('images/Blushin.jpg')}}"
            alt="Product model closeup"
            class="w-full h-auto object-cover"
          />
        </div>
      </div>

      <!-- Left Content (on mobile this comes second) -->
      <div class="order-2 lg:order-1">
        <!-- Product Name -->
        <h3 id="product-name" class="text-xl font-semibold text-gray-900 mb-2">
          Blushin' Sweet Cheek and Lip Tint
        </h3>

        <!-- Price -->
        <p class="text-pink-600 font-bold mb-3 font-sans">
          89 SAR <span id="tax-included" class="text-sm text-gray-500 font-medium">Tax Included</span>
        </p>

        <!-- Description -->
        <p id="desc1" class="text-gray-600 mb-3 leading-relaxed">
          A buildable lightweight Cheek and Lip Tint that gives you the natural matte color 
          you've been looking for this summer!
        </p>
        <p id="desc2" class="text-gray-600 mb-3 leading-relaxed">
          This easy-to-apply tint will be your go-to product that never leaves your purse this summer.
        </p>
        <p id="desc3" class="text-gray-600 mb-6 leading-relaxed">
          Its long-lasting hydrating formula will make it your favorite. It's the...
        </p>
        <p id="desc4" class="text-gray-600 mb-6 leading-relaxed">
          MAKE products are formulated using botanical and botanically-derived ingredients 
          and tested synthetic ingredients.
        </p>

        <!-- Button -->
        <button id="buy-it-now" class="bg-pink-500 w-full hover:bg-pink-600 text-white font-semibold py-3 px-10 rounded-full transition duration-300">
          Buy It Now
        </button>
      </div>
    </div>
  </div>
</section>

<style>
/* Responsive Enhancements */
@media (max-width: 1024px) {
  #star-routine-title {
    font-size: 1.75rem;
  }
}

@media (max-width: 768px) {
  section {
    padding-top: 3rem;
    padding-bottom: 3rem;
  }
  #product-name {
    text-align: center;
  }
  #buy-it-now {
    width: 100%;
  }
  #desc1, #desc2, #desc3, #desc4 {
    text-align: center;
  }
}

@media (max-width: 480px) {
  h2 {
    font-size: 1.5rem;
  }
  p {
    font-size: 0.95rem;
  }
}
</style>


<section class="py-16">
    <div class="container">
        <h2 id="follow-us-title" class="text-left text-3xl md:text-4xl py-10 font-serif font-bold mb-8">
            Follow us
            <span class="bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent">
                @mbbyamani
            </span> 
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
        <div class="rounded-lg overflow-hidden shadow-md">
          <img src="{{asset('images/instagram-1.jpg')}}"
               alt="Instagram 1" class="w-full h-full object-cover"/>
        </div>
        <div class="rounded-lg overflow-hidden shadow-md">
          <img src="{{asset('images/instagram-2.jpg')}}"               
              alt="Instagram 2" class="w-full h-full object-cover"/>
        </div>
        <div class="rounded-lg overflow-hidden shadow-md">
          <img src="{{asset('images/instagram-3.jpg')}}"
              alt="Instagram 3" class="w-full h-full object-cover"/>
        </div>
      </div>
    </div>
</section>

{% endblock %} {% block scripts %}
<script defer src="{{ 'home.js' | asset }}"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const htmlEl = document.documentElement;
  let isRTL = (htmlEl.getAttribute('dir')||'').toLowerCase()==='rtl' || /ar/i.test(htmlEl.getAttribute('lang')||'');

  // i18n map for home page
  const i18n = {
    en: {
      marquee_cream: "Magic Water Cream",
      marquee_lip: "Shop Our Best Lip Gloss",
      exclusive_title: "Exclusive offer",
      exclusive_desc: "Unlock the ultimate style upgrade with our exclusive offer. Enjoy savings of up to 40% off on our latest New Products.",
      customer_reviews: "Customer Reviews",
      star_routine: "The Star of Your Routine",
      product_name: "Blushin' sweet Cheek and Lip Tint",
      tax_included: "Tax Included",
      desc1: "A buildable lightweight Cheek and Lip Tint, that gives you the natural matte color you've been looking for this summer!",
      desc2: "This easy-to-apply tint will be your go-to product that never leaves your purse this summer.",
      desc3: "Its long-lasting hydrating formula will make it your favorite. It's the...",
      desc4: "MAKE products are formulated using botanical and Botanically-derived ingredients and tested synthetic ingredients.",
      buy_it_now: "Buy It Now",
      follow_us: "Follow us",
      days: "Days",
      hours: "Hours",
      minutes: "Min",
      buy_now_offer: "BUY NOW"
    },
    ar: {
      marquee_cream: "كريم الماء السحري",
      marquee_lip: "تسوق أفضل لمعان الشفاه لدينا",
      exclusive_title: "عرض حصري",
      exclusive_desc: "افتح الترقية الأخيرة للأسلوب مع عرضنا الحصري. استمتع بخصومات تصل إلى 40% على أحدث المنتجات الجديدة.",
      customer_reviews: "آراء العملاء",
      star_routine: "نجم روتينك",
      product_name: "وميض حلو للخدود والشفاه",
      tax_included: "الضريبة مشمولة",
      desc1: "صبغة خفيفة الوزن قابلة للبناء للخدود والشفاه، تعطيك اللون المات الطبيعي الذي تبحث عنه هذا الصيف!",
      desc2: "هذه الصبغة السهلة التطبيق ستكون منتجك المفضل الذي لا يغادر حقيبتك هذا الصيف.",
      desc3: "صيغتها المرطبة طويلة الأمد ستجعلها مفضلتك. إنها...",
      desc4: "منتجات MAKE مصنعة باستخدام مكونات نباتية ومشتقة نباتياً ومكونات اصطناعية مختبرة.",
      buy_it_now: "اشترِ الآن",
      follow_us: "تابعنا",
      days: "أيام",
      hours: "ساعات",
      minutes: "دقائق",
      buy_now_offer: "اشترِ الآن"
    }
  };

  const setTxt = (id, txt) => { 
    const el = document.getElementById(id); 
    if (el) el.textContent = txt; 
  };

  const setMarqueeText = (className, txt) => {
    document.querySelectorAll('.' + className).forEach(el => {
      el.textContent = txt;
    });
  };

  function applyTexts() {
    const d = isRTL ? i18n.ar : i18n.en;
    setMarqueeText('cream-text', d.marquee_cream);
    setMarqueeText('lip-text', d.marquee_lip);
    setTxt('exclusive-title', d.exclusive_title);
    setTxt('exclusive-desc', d.exclusive_desc);
    setTxt('customer-reviews-title', d.customer_reviews);
    setTxt('star-routine-title', d.star_routine);
    setTxt('product-name', d.product_name);
    setTxt('tax-included', d.tax_included);
    setTxt('desc1', d.desc1);
    setTxt('desc2', d.desc2);
    setTxt('desc3', d.desc3);
    setTxt('desc4', d.desc4);
    setTxt('buy-it-now', d.buy_it_now);
    setTxt('follow-us-title', d.follow_us);
    setTxt('days-label', d.days);
    setTxt('hours-label', d.hours);
    setTxt('minutes-label', d.minutes);
    setTxt('buy-now-offer', d.buy_now_offer);

    // Reset marquee animations for seamless restart after text update
    resetMarqueeAnimation();
  }

  function resetMarqueeAnimation() {
    const rows = document.querySelectorAll('.marquee-row');
    rows.forEach(row => {
      const content = row.querySelector('.marquee-content');
      if (content) {
        const style = content.style;
        style.animation = 'none';
        // Force reflow
        content.offsetHeight;
        
        // Reapply animation based on row class and direction
        if (row.classList.contains('marquee-row-1')) {
          style.animation = isRTL ? 
            'marquee-scroll-right 30s linear infinite' : 
            'marquee-scroll-left 30s linear infinite';
        } else if (row.classList.contains('marquee-row-2')) {
          style.animation = isRTL ? 
            'marquee-scroll-left 34s linear infinite' : 
            'marquee-scroll-right 34s linear infinite';
        }
      }
    });
  }

  // Countdown Timer Logic
  function updateCountdown() {
    // Assume end date is 7 days from now for demo; adjust as needed
    const endDate = new Date();
    endDate.setDate(endDate.getDate() + 7);
    endDate.setHours(23, 59, 59, 999);

    const now = new Date().getTime();
    const distance = endDate.getTime() - now;

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

    document.getElementById('days').textContent = days.toString().padStart(2, '0');
    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');

    if (distance < 0) {
      document.getElementById('countdown').innerHTML = '<p class="text-center text-white">Offer Ended!</p>';
    }
  }

  // Salla events for localization
  if (typeof salla !== 'undefined') {
    salla.event.on('localization::changed', function(payload) {
      try {
        const lang = (payload && payload.language && payload.language.code || '').toLowerCase();
        isRTL = lang.startsWith('ar');
        if (isRTL) { 
          document.documentElement.classList.add('rtl-active'); 
          document.documentElement.setAttribute('dir', 'rtl'); 
        } else { 
          document.documentElement.classList.remove('rtl-active'); 
          document.documentElement.setAttribute('dir', 'ltr'); 
        }
        applyTexts();
      } catch(e) {}
    });
  }

  // Initialize
  if (isRTL) { 
    document.documentElement.classList.add('rtl-active'); 
    document.documentElement.setAttribute('dir', 'rtl'); 
  } else { 
    document.documentElement.setAttribute('dir', 'ltr'); 
  }
  applyTexts();
  updateCountdown();
  setInterval(updateCountdown, 60000); // Update every minute
});
</script>
{% endblock %}